# TabCleaner

一个自动管理浏览器标签页的扩展，帮助节省内存并提升浏览器性能。

[English](README.en.md) | 中文

## 功能特性

### 🚀 自动标签页管理
- **自动丢弃空闲标签页**：自动丢弃在指定时间内未使用的标签页（默认：30 分钟）
- **智能空闲检测**：修复了标签页被错误丢弃的问题 - 现在能正确跟踪每个标签页最后使用时间
- **可自定义空闲时间**：设置你偏好的空闲时间限制（单位：秒）

### ⚡ 快速操作
- **丢弃当前标签页**：立即释放当前激活标签页的内存
- **丢弃其他标签页**：仅保持当前标签页激活，丢弃所有其他标签页
- **丢弃标签组**：丢弃当前标签组中的所有标签页
- **丢弃空闲标签页**：手动触发丢弃空闲 30 分钟以上的标签页

### 🛡️ 标签页保护
- **临时保护**：保护标签页 24 小时或 1 周不被丢弃
- **永久白名单**：添加 URL 模式以永久保护特定网站
- **通配符支持**：使用如 `*.example.com/*` 的模式保护整个域名

### 📊 标签页状态与跟踪
- **实时状态显示**：在弹窗顶部显示激活、已丢弃和总标签页数量
- **自动刷新**：状态每 5 秒更新一次，在丢弃操作后立即更新
- **可视化指示器**：标签页被丢弃时在控制台输出清晰的表情符号指示
- **丢弃历史**：跟踪并显示最近丢弃的标签页及时间戳
- **详细信息**：显示每个已丢弃标签页的标题、URL 和丢弃时间
- **历史管理**：查看最近的丢弃历史并在需要时清除

### 🎨 现代化 UI 设计
- **毛玻璃效果**：带有背景模糊的半透明卡片
- **渐变背景**：贯穿始终的美丽紫色渐变主题
- **流畅动画**：悬停效果、加载状态和过渡动画
- **颜色编码按钮**：不同操作类型的视觉区分
- **响应式布局**：优化的间距和排版，提升可读性

### 🌍 多语言支持
- English（英文）
- 中文

## 安装说明

本项目使用浏览器专用的 manifest 文件：
- `manifest_chrome.json` 用于 Chrome/Edge
- `manifest_firefox.json` 用于 Firefox

### Chrome/Edge 浏览器

**方式一：使用构建脚本（推荐）**
1. 下载或克隆本仓库
2. 运行 `node build.js chrome` 为 Chrome 构建
3. 打开 Chrome 浏览器，访问 `chrome://extensions/`
4. 在右上角启用"开发者模式"
5. 点击"加载已解压的扩展程序"，选择 `dist/chrome` 文件夹
6. TabCleaner 图标将出现在工具栏中

**方式二：直接安装**
1. 下载或克隆本仓库
2. 将 `manifest_chrome.json` 重命名为 `manifest.json`
3. 打开 Chrome 浏览器，访问 `chrome://extensions/`
4. 在右上角启用"开发者模式"
5. 点击"加载已解压的扩展程序"，选择扩展文件夹
6. TabCleaner 图标将出现在工具栏中

### Firefox 浏览器

1. 下载或克隆本仓库
2. 运行 `node build.js firefox` 为 Firefox 构建（将在 `dist/firefox` 文件夹中创建正确的 manifest）
3. 打开 Firefox 浏览器，访问 `about:debugging#/runtime/this-firefox`
4. 点击"临时载入附加组件"
5. 选择 `dist/firefox` 文件夹中的 `manifest.json` 文件
6. TabCleaner 图标将出现在工具栏中

注意：Firefox 中的临时扩展在浏览器重启后会被移除。要使其永久化，需要通过 [Firefox Add-ons](https://addons.mozilla.org/developers/) 进行签名。

### 构建脚本

你可以使用构建脚本创建特定浏览器的发布版本：

```bash
# 仅为 Chrome 构建
node build.js chrome

# 仅为 Firefox 构建
node build.js firefox

# 为所有浏览器构建
node build.js all
# 或者简写
node build.js
```

输出结果将在 `dist` 文件夹中，每个浏览器都有单独的子目录。

## 使用方法

点击工具栏中的 TabCleaner 图标以访问：
- **标签页状态概览**：实时显示激活、已丢弃和总标签页数量
- **快速丢弃选项**：立即丢弃当前标签页、其他标签页或标签组
- **标签页保护设置**：为重要标签页设置临时或永久保护
- **自动丢弃配置**：自定义自动丢弃的空闲时间限制
- **丢弃历史**：查看最近丢弃的标签页并清除历史记录

### 标签页状态显示

弹窗顶部现在显示一个状态栏，包含三个关键指标：
- **激活**：当前加载的（未丢弃的）标签页数量
- **已丢弃**：为节省内存而丢弃的标签页数量
- **总计**：所有窗口中的标签页总数

此信息每 5 秒自动更新，并在任何丢弃操作后立即更新。

## 最近更新 (v0.4) - UI 重新设计 ✨

- **🎨 完整 UI 重新设计**：采用毛玻璃效果和渐变背景的现代化设计
- **✨ 流畅动画**：按钮悬停效果、涟漪动画和加载状态
- **🌈 颜色编码操作**：不同操作类型使用不同按钮颜色
- **📱 增强布局**：改进的间距、排版和响应式设计
- **🎪 视觉效果**：背景模糊、浮动动画和现代卡片设计

## 之前的更新 (v1.0.0)

- **修复关键错误**：标签页在切换时不再被错误丢弃
- **改进空闲时间跟踪**：现在能正确记录每个标签页最后使用的时间
- **增强稳定性**：更好地处理标签页切换和关闭事件

## 权限说明

- `tabs`：管理和丢弃标签页所需
- `storage`：保存设置和白名单所需
- `activeTab`：识别当前激活的标签页所需

## 隐私保护

本扩展完全在你的设备本地运行。不会收集或传输任何数据到外部服务器。
